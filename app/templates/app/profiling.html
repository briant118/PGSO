<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>PPS Profiling - {{ resident.get_full_name }}</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #f5f5f5;
      min-height: 100vh;
      padding: 1rem;
      color: #1a1d24;
    }
    .profiling-card {
      max-width: 420px;
      margin: 0 auto;
      background: #fff;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }
    .profiling-header {
      background: linear-gradient(135deg, #1e3a5f 0%, #152a45 100%);
      color: #fff;
      padding: 1rem 1.25rem;
      text-align: center;
      font-weight: 700;
      font-size: 1rem;
    }
    .profiling-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 0.75rem;
      padding: 1rem;
    }
    /* Blue box - Profile picture */
    .box-profile {
      grid-column: 1;
      grid-row: 1;
      background: #e3f2fd;
      border: 2px solid #2196f3;
      border-radius: 12px;
      padding: 0.75rem;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 120px;
    }
    .box-profile img {
      width: 90px;
      height: 90px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid #2196f3;
    }
    .box-profile .placeholder {
      width: 90px;
      height: 90px;
      border-radius: 50%;
      background: #bbdefb;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #1976d2;
      font-size: 2rem;
    }
    /* Green box - Barangay and ID */
    .box-barangay {
      grid-column: 2;
      grid-row: 1;
      background: #e8f5e9;
      border: 2px solid #4caf50;
      border-radius: 12px;
      padding: 0.75rem;
      display: flex;
      flex-direction: column;
      justify-content: center;
      gap: 0.5rem;
    }
    .box-barangay .label { font-size: 0.75rem; color: #2e7d32; font-weight: 600; text-transform: uppercase; }
    .box-barangay .value { font-size: 1rem; font-weight: 700; color: #1b5e20; }
    .box-barangay .id-value { font-size: 1.1rem; color: #ff6f00; }
    /* Violet box - QR code */
    .box-qr {
      grid-column: 1;
      grid-row: 2;
      background: #ede7f6;
      border: 2px solid #7e57c2;
      border-radius: 12px;
      padding: 0.75rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 0.25rem;
    }
    .box-qr img {
      width: 100px;
      height: 100px;
      padding: 4px;
      background: #fff;
      border-radius: 8px;
    }
    .box-qr .hint { font-size: 0.7rem; color: #5e35b1; }
    /* Yellow box - Economic status, Senior, PWD */
    .box-economic {
      grid-column: 2;
      grid-row: 2;
      background: #fffde7;
      border: 2px solid #fbc02d;
      border-radius: 12px;
      padding: 0.75rem;
      display: flex;
      flex-direction: column;
      justify-content: center;
      gap: 0.35rem;
    }
    .box-economic .label { font-size: 0.75rem; color: #f57f17; font-weight: 600; text-transform: uppercase; }
    .box-economic .value { font-size: 0.95rem; font-weight: 600; color: #f57f17; }
    .box-economic .badge {
      display: inline-block;
      padding: 0.2rem 0.5rem;
      border-radius: 6px;
      font-size: 0.8rem;
      font-weight: 600;
    }
    .badge-senior { background: #ffecb3; color: #e65100; }
    .badge-pwd { background: #ffe0b2; color: #ef6c00; }
    .btn-download {
      display: block;
      text-align: center;
      padding: 0.75rem 1rem;
      margin: 0 1rem 1rem;
      background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);
      color: #fff;
      border-radius: 8px;
      text-decoration: none;
      font-weight: 600;
      font-size: 0.95rem;
    }
    .btn-download:hover { opacity: 0.9; }
  </style>
</head>
<body>
  <div class="profiling-card">
    <div class="profiling-header">PPS Palawan Profiling System</div>
    <div class="profiling-grid">
      <!-- Blue: Profile picture -->
      <div class="box-profile">
        {% if profile_picture_url %}
        <img src="{{ profile_picture_url }}" alt="Profile">
        {% else %}
        <div class="placeholder"><span>ðŸ‘¤</span></div>
        {% endif %}
      </div>
      <!-- Green: Barangay and ID -->
      <div class="box-barangay">
        <span class="label">Barangay</span>
        <span class="value">{% if resident.barangay %}{{ resident.barangay.name }}{% else %}â€”{% endif %}</span>
        <span class="label">Resident ID</span>
        <span class="value id-value">{{ resident.resident_id|default:resident.id }}</span>
      </div>
      <!-- Violet: QR code -->
      <div class="box-qr">
        <img src="{% url 'operations:resident_qr' resident.pk %}" alt="QR Code">
        <span class="hint">Scan to view</span>
      </div>
      <!-- Yellow: Economic status, Senior, PWD -->
      <div class="box-economic">
        <span class="label">Economic Status</span>
        <span class="value">{{ resident.get_economic_status_display|default:"â€”" }}</span>
        {% if resident.economic_status == 'SENIOR CITIZEN' %}
        <span class="badge badge-senior">Senior Citizen</span>
        {% endif %}
        {% if resident.health_status == 'PWD' %}
        <span class="badge badge-pwd">PWD</span>
        {% endif %}
      </div>
    </div>
    <a href="{% url 'app:resident_profile_pdf' resident.pk %}" class="btn-download">Download PDF</a>
  </div>
</body>
</html>
